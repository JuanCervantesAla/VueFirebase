{"version":3,"sources":["webpack:///./src/views/About.vue","webpack:///./src/views/About.vue?aa81"],"names":["class","scope","_createElementBlock","_hoisted_1","_createVNode","_component_Navbar","_createElementVNode","_hoisted_2","_hoisted_3","$data","usuario","nombre","$event","type","_hoisted_4","correo","_hoisted_5","onChange","_cache","$options","buscarImagen","_hoisted_6","onClick","_withModifiers","actualizarDato","_ctx","id","editar","agregarDato","_hoisted_7","src","datoImagen","_hoisted_8","_hoisted_9","_Fragment","_renderList","usuarios","item","index","key","_hoisted_10","_toDisplayString","obtenerDatoID","this","_hoisted_11","eliminarDato","_hoisted_12","name","components","Navbar","data","file","error","loading","foto","methods","querySnapshot","getDocs","collection","db","forEach","doc","push","console","log","deleteDoc","router","go","docRef","docSnap","getDoc","exists","event","tipoArchivo","target","files","reader","FileReader","readAsDataURL","onload","e","result","storageRef","firebase","storage","ref","child","put","urlDescarga","getDownloadURL","addDoc","elemento","updateDoc","mounted","obtenerDatos","__exports__","render"],"mappings":"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","file":"js/about.6eab6247.js","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Navbar/>\r\n      <!-- ////////// formulario Añadir ////////// -->\r\n    <!-- Nombre -->\r\n  <div class=\"container my-4\">\r\n  <form>  \r\n    <div class=\"input-group mb-3\">\r\n    <span class=\"input-group-text\">Nombre</span>\r\n    <input v-model=\"usuario.nombre\" type=\"text\" class=\"form-control\">\r\n    </div>\r\n    <!-- Correo -->\r\n    <div class=\"input-group mb-3\">\r\n    <span class=\"input-group-text\">Correo</span>\r\n    <input v-model=\"usuario.correo\" type=\"text\" class=\"form-control\">\r\n    </div>\r\n    <div class=\"input-group my-3\">\r\n      <input type=\"file\" @change=\"buscarImagen($event)\">\r\n    </div>\r\n\r\n      <div class=\"mt-3\">  \r\n    <button v-show=\"this.editar === true\" \r\n      @click.prevent=\"actualizarDato(id)\" \r\n      class=\"btn btn-primary\">\r\n      Actualizar\r\n    </button>\r\n    <button v-show=\"this.editar === false\" \r\n      @click.prevent=\"agregarDato()\" \r\n      class=\"btn btn-primary\">\r\n      Guardar\r\n    </button>\r\n    <div class=\"mt-4\">\r\n      <img :src=\"datoImagen\">\r\n    </div>\r\n\r\n    </div>\r\n  </form>\r\n  </div>\r\n<!-- ////////// tabla ////////// -->\r\n  <table class=\"table\">\r\n    <thead>\r\n      <tr>\r\n        <th scope=\"col\">id</th>\r\n        <th scope=\"col\">Nombre</th>\r\n        <th scope=\"col\">Correo</th>\r\n        <th scope=\"col\">Editar</th>\r\n        <th scope=\"col\">Eliminar</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"(item, index) in usuarios\" :key=\"index\">\r\n        <th scope=\"row\">{{index}}</th>\r\n        <td>{{item.nombre}}</td>\r\n        <td>{{item.correo}}</td> \r\n        <td>\r\n          <button @click.prevent=\"obtenerDatoID( item.id );this.editar = !this.editar;\" \r\n            class=\"btn btn-primary\">Editar\r\n          </button>\r\n        </td>\r\n\r\n        <td>\r\n          <button @click.prevent=\"eliminarDato(item.id)\" \r\n            class=\"btn btn-danger\">Eliminar\r\n          </button>\r\n      </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from '@/components/Navbar.vue'\r\nimport { collection, getDocs, addDoc, deleteDoc, doc, getDoc, updateDoc  } from 'firebase/firestore/lite';\r\nimport { db, storage } from \"../main\";\r\nimport firebase from 'firebase/compat/app';\r\nimport router from '../router/index'\r\n\r\nexport default {\r\n  name: 'About',\r\n  components: {\r\n    Navbar\r\n  },\r\n  data() {\r\n    return {\r\n      file: null,\r\n      datoImagen: null,\r\n      error: null,\r\n      editar: false,\r\n      loading: false,\r\n\r\n      usuarios: [],\r\n      usuario: {\r\n      nombre: '',\r\n      correo: '',\r\n      foto: ''\r\n    }\r\n  }\r\n  },\r\n  methods: {\r\n    async obtenerDatos () { \r\n      const querySnapshot = await getDocs(collection(db, \"usuarios\"));\r\n        querySnapshot.forEach((doc) => {\r\n        let usuario = doc.data()\r\n        usuario.id = doc.id\r\n        this.usuarios.push(usuario)\r\n        console.log(usuario)\r\n      });\r\n    },\r\n    // DELETE / ELIMINAR / BORRAR\r\n    async eliminarDato (id){\r\n      await deleteDoc(doc(db, \"usuarios\", id ));\r\n      router.go('/')\r\n    },\r\n    // GET BY ID / OBTENER POR ID\r\n    async obtenerDatoID (id){\r\n      const docRef = doc(db, \"usuarios\", id);\r\n      const docSnap = await getDoc(docRef);\r\n          if (docSnap.exists()) {\r\n            this.usuario = docSnap.data()\r\n            this.usuario.id = docSnap.id\r\n            } \r\n            else {\r\n            console.log(\"¡No existe el documento!\");\r\n            }\r\n    },\r\n\r\n     // BUSCAR IMAGEN\r\n    buscarImagen(event){\r\n      const tipoArchivo = event.target.files[0].type;\r\n      if(tipoArchivo === 'image/jpeg' || tipoArchivo === 'image/png'){\r\n          this.file = event.target.files[0]\r\n          this.error = null\r\n      }\r\n          else{\r\n          this.error = 'Archivo no válido'\r\n          this.file = null\r\n          return \r\n          }\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(this.file);\r\n          reader.onload = (e) => {\r\n          this.datoImagen = e.target.result\r\n          }\r\n    },\r\n    // SUBIR IMAGEN STORAGE\r\n  async agregarDato(){\r\n    try {\r\n     this.loading = true\r\n      var storageRef = firebase.storage().ref();\r\n      await storageRef.child('imagenes').child(this.file.name).put(this.file)\r\n      const urlDescarga = await storageRef.child('imagenes').child(this.file.name).getDownloadURL()\r\n      await addDoc(collection(db, \"usuarios\"), {\r\n          nombre: this.usuario.nombre,\r\n          correo: this.usuario.correo,\r\n          foto: urlDescarga\r\n        })\r\n        this.error = 'Imagen subida con éxito'\r\n        this.file = null\r\n    } \r\n      catch (error) {\r\n        console.log(error);\r\n      } \r\n      finally {\r\n        router.push('/')\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n// MÉTODO actualizarDato\r\nasync actualizarDato(){\r\n    try {\r\n      this.loading = true\r\n      var storageRef = firebase.storage().ref();\r\n      await storageRef.child('imagenes').child(this.file.name).put(this.file)\r\n      const urlDescarga = await storageRef.child('imagenes').child(this.file.name).getDownloadURL()\r\n      const elemento = doc(db, \"usuarios\", this.usuario.id )\r\n      await updateDoc(elemento, {\r\n          nombre: this.usuario.nombre,\r\n          correo: this.usuario.correo,\r\n          foto: urlDescarga\r\n        })\r\n        this.error = 'Imagen subida con éxito'\r\n        this.file = null\r\n    } \r\n      catch (error) {\r\n        console.log(error);\r\n      } \r\n      finally {\r\n        router.push('/')\r\n        this.loading = false\r\n      }}\r\n  },\r\n  mounted() {\r\n    this.obtenerDatos();\r\n  },\r\n}\r\n\r\n</script>","import { render } from \"./About.vue?vue&type=template&id=2ea91890\"\nimport script from \"./About.vue?vue&type=script&lang=js\"\nexport * from \"./About.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\juanj\\\\Documents\\\\UDG\\\\5to Like that\\\\Programacion para internet\\\\Practica-FirebaseVue\\\\ProyectoVueFirebase04\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}